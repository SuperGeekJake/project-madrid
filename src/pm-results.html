<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="./pm-button.html">

<dom-module id="pm-results">
  <template>
    <style>
      :host {
        display: block
      }
    </style>
    <h1>You are true [[displayResultTitle(result)]]</h1>
    <h2>[[displayResultContent(result)]]</h2>
    <p>Toggl is hiring superheroes like you!</p>
    <pm-button>See Open Positions</pm-button>

    <a on-click="shareOnFacebook" href="#"> <!-- TODO make a sexy buttton -->
      share on facebook
    </a>
  </template>
  <script>
    const results = [
      'teamPlayer',
      'communicator',
      'goGetter',
      'innovator'
    ]
    const resultTitleMessages = {
      'teamPlayer': 'Team Player',
      'communicator': 'Communicator',
      'goGetter': 'Go-getter',
      'innovator': 'Innovator'
    }
    const resultContentMessages = {
      'teamPlayer': 'Going it alone is not an option. You believe that any kind of success is a result of team effort. One for all and all for one - this is the secret recipe for making it big!',
      'communicator': 'The main cause of failure is people not talking to each other. Any problem can be solved with efficient and timely communication!',
      'goGetter': 'Come on! Let\s just release the project, how hard can it be?! You believe that if your product is any good, then you\'re already too late publishing it.',
      'innovator': 'You\'re a generator of new ideas. Reflection, deep thought, and out-of-the-comfort zone situations give you a kick and lead to spectacular innovation.'
    }
    class PMResults extends Polymer.Element {
      static get is () {
        return 'pm-results'
      }
      static get properties () {
        return {
          result: Number
        }
      }
      shareOnFacebook () {
        FB.ui({
          method: 'share',
          display: 'popup',
          href: 'https://the-final-url.com/', // TODO change the shared url (that is what will actually be on fb)
        }, function(response){ /* do nothing on response ??? */ });
      }
      displayResultTitle (index) {
        const result = results[index]
        return resultTitleMessages[result]
      }
      displayResultContent (index) {
        const result = results[index]
        return resultContentMessages[result]
      }
    }
    window.customElements.define(PMResults.is, PMResults);
  </script>

  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId            : 'your-app-id', // TODO change the id
        autoLogAppEvents : true,
        xfbml            : true,
        version          : 'v2.12'
      });
    };

    // default facebook init code...
    (function(d, s, id){
       var js, fjs = d.getElementsByTagName(s)[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement(s); js.id = id;
       js.src = "https://connect.facebook.net/en_US/sdk.js";
       fjs.parentNode.insertBefore(js, fjs);
     }(document, 'script', 'facebook-jssdk'));
  </script>


</dom-module>
